1帧结构定义FRAME
1.1帧结构
名称	同步字1	同步字2	秘钥	系统ID	目标ID	帧序号	消息组ID	消息ID	数据区长度	数据区	校验
	SYNC1	SYNC2	KEY*4	SYS_ID*2	TGT_ID*3	SEQ	CLASS_ID*1	MSG_ID
/CMD_ID	MSG_LEN	PAYLOAD	CHK
字节数	1	1	2	1	1	1	1	2	1	MSG_LEN	2
数值	0xEB	0x90		0~255	0~255	0~255	0~255	0~0xFFFF	-	-	-
备注	*1: 消息组ID：不同类型数据的消息组ID； 
*2：系统ID：发送者（飞机、地面站）的ID；
*3：目标ID：接收者（飞机、地面站）的ID；
*4：秘钥：统一管理和分配，使用时需申请；

1.2系统ID SYS_ID
发送者（飞机、地面站）的ID；
ID分配方式待定；
1.3目标ID TGT_ID
接收者（飞机、地面站）的ID；
ID分配方式待定；
1.4帧序号SEQ
1）交互方式
	发送方填入，接收方解析后用于丢包率统计等用途；
2）数据内容
	根据目标ID进行分组统计，内容为向该目标ID发送的所有消息帧的总计数；大于255时清零。
1.5消息组ID CLASS ID
a)上行数据（地面-空中）：
1)0x01：遥控心跳帧；
2)0x02：飞行遥控帧；
3)0x03：操纵杆指令帧；
4)0x04：差分指令帧；
5)0x05：任务遥控指令帧；
6)0x06：遥测数据回报帧
7)0x07：航线数据上行帧
8)0X08：参数数据上行帧
b)下行数据（空中-地面）：
1)0x10：飞行遥测数据帧；
2)0x11：任务遥测数据帧；
3)0x12：数据帧格式帧；
4)0x13：航线数据下行帧
5)0X14：参数数据下行帧

c)空中广播数据（空中-空中）
d)地面广播数据（地面-地面）
1.6消息ID  MSG_ID/CMD_ID
	消息ID是隶属于CLASS_ID，用来区分隶属于某消息组下的各类消息的识别码。
a)内容
	见下文
b)定义方式
	在所归属的消息组下，按照功能、所属子系统等区别进行定义。各消息组下的消息ID指令码可以重复。
1.7数据区长度 MSG_LEN
	MSG_LEN是指数据区字段的字节数（不含校验位）。
1.8数据区PAYLOAD
	PAYLOAD是指消息搭载的数据内容。数据区长度不大于200。
1.9CHK校验计算方法
校验计算范围：除去同步字1,2和CHK校验字外的全部字节。
校验计算方式：
下行数据采用累加和校验方式(字节累加求和，取低16位)，计算方式如下（C语言版）：
unsigned short Sum16(unsigned char Buf[], unsigned char start, unsigned char stop)
{
	unsigned char  idx;
	unsigned short sum = 0;
	for (idx = start; idx < stop; idx++)
	{
		sum += Buf[idx];
	}
	return sum;
}
上行数据使用CRC16/XMODEM校验，其多项式为X16+X12+X5+1，计算方式如下（C语言版）：
uint16 crc16_xmodem (uint8 *data, uint8 data_len)	//一次最多计算255个字节的校验
{
uint16 crc16 = 0;
uint8 i = 0;
    for(i = 0; i < data_len; i++)
    {
        crc16 = (uint16)(( crc16 >> 8) | (crc16 << 8));
        crc16^= data[i];
        crc16^=( uint16)(( crc16&0xFF)>>4);
        crc16^=( uint16)((crc16 << 8)<<4);
        crc16^=( uint16)(((crc16&0xFF)<<4)<<1);
    }
    return crc16;
}
1.10大小端定义
	统一按小端格式处理，即低字节在前，高字节在后。
2上行消息定义（地面-空中）
2.1CLASS_ID#01	遥控心跳帧
MSG_ID	0x00
字节偏移量	字节数	名称	类型	分辨率	单位	备注
0	4	心跳计数	uint32	1	—	心跳计数为心跳帧发送次数
数据长度	4					
2.2CLASS_ID#02	飞行遥控帧
2.2.1   CMD#XX  
MSG_ID	（0xXX）
字节偏移量	字节数	名称	类型	分辨率	单位	备注
0	4	Param1	Float		kg	
4	4	Param2	Float		%	
8	4	Param3	Float			
12	4	Param4	Float			
16	4	Param5	Float			
20	4	Param6	Float			
24	4	Param7	Float			
数据长度	28					
指令码及附加信息
类型	指令名称	CMD_ID	附加内容	数据类型	分辨率	单位
校准	磁罗盘校准（1面、3面、6面）	0xF1	param2=1,param3=1(1面)/2(3面) /3(6面)			
	加速度校准	0xF1	param5=1			
	陀螺校准	0xF1	param1=1			
	空速校准	0xF1	param6=1			
	水平校准	0xF1	param5=2			
	电池校准	0xF1	param5=3			
	油门校准	0xF1	param5=4			
	遥控器校准	0xF1	param4=1（校准结束）/2（校准开始）			
	校准取消	0xF1	param1-param7全为0			
飞参指令	飞参操作	0xF5	Param1=0（参数重置）/1（参数保存）2（参数重置并删除参数文件）			
日志指令	开始记录	0xF5	Param3=1		地面站param1	
	停止记录	0xF5	Param3=2		地面站param1	
	开始下载	0xF8	Param1=1		没找到	
	停止下载	0xF8	Param1=2		没找到	
版本查看	飞控软件	0xF9				
测试指令	舵面极性检查	0xB0	param1=0x81;
param2=16;			
	舵面极性测试	0xB0	param1=0b10;
param2=1;
param3=舵机编号;
param4=舵机位置;		舵机编号：1副翼；2升降；3方向；5前轮；6刹车
舵机位置：1最大；2最小；3中位	

飞行指令	左转（固定翼）	0xB0	param1=0x81;
param2=6;
param3=0x11			
	右转（固定翼）	0xB0	param1=0x81;
param2=6;
param3=0x12			
	滚转遥调（固定翼）	0xB0	param1=0x81;
param2=6;
param3=0x13
param4=注入值			
	航向保持（固定翼）	0xB0	param1=0x81;
param2=6;
param3=0x14			
	航向遥调（固定翼）	0XB0	param1=0x81;
param2=6;
param3=0x15
param4=注入值		Psi=±180	
	平飞（固定翼）	0xB0	param1=0x81;
param2=6;
param3=0x16			
	速度遥调（旋翼）	0xB0	param1=0x81;
param2=6;
param3=0x17
param4=注入值			
	高度保持（固定翼）	0xB0	param1=0x81;
param2=6;
param3=0x21			
	高度遥调（固定翼）	0xB0	param1=0x81;
param2=6;
param3=0x22			
	爬升（固定翼）	0xB0	param1=0x81;
param2=6;
param3=0x23			
	下滑（固定翼）	0xB0	param1=0x81;
param2=6;
param3=0x24			
	俯仰遥调（固定翼）	0xB0	param1=0x81;
param2=6;
param3=0x25			
	速度遥调（旋翼）	0xB0	param1=0x81;
param2=6;
param3=0x26			
	右转（固定翼）	0xB0	param1=0x81;
param2=6;
param3=0x30			
	左盘旋（固定翼）	0xB0	param1=0x81;
param2=6;
param3=0x31
param4=radius
param5=alt
param6=lon
param7=lat		param5：相对home点高度	
	右盘旋（固定翼）	0xB0	param1=0x81;
param2=6;
param3=0x32
param4=radius
param5=alt
param6=lon
param7=lat		param5：相对home点高度	
	油门遥调（固定翼）	0xB0	param1=0x81;
param2=6;
param3=0x41
param4=thr			
	速度遥调（固定翼）	0xB0	param1=0x81;
param2=6;
param3=0x42
param4=Vi			
	速度遥调（旋翼）	0xB0	param1=0x81;
param2=6;
param3=0x43
param4=Vg			
	重置（旋翼）	0xB0	param1=0x81;
param2=6;
param3=0x70		loiter_vx = 0.f;
loiter_vy = 0.f;
loiter_vz = 0.f;
loiter_yaw_rate = 0.f;
loiter_alt = 0.f;
loiter_yaw = 0.f;	
	前飞（旋翼）	0xB0	param1=0x81;
param2=6;
param3=0x71			
	后飞（旋翼）	0xB0	param1=0x81;
param2=6;
param3=0x72			
	左飞（旋翼）	0xB0	param1=0x81;
param2=6;
param3=0x73			
	右飞（旋翼）	0xB0	param1=0x81;
param2=6;
param3=0x74			
	左转（旋翼）	0xB0	param1=0x81;
param2=6;
param3=0x75			
	右转（旋翼）	0xB0	param1=0x81;
param2=6;
param3=0x76			
	上升（旋翼）	0xB0	param1=0x81;
param2=6;
param3=0x77			
	下降（旋翼）	0xB0	param1=0x81;
param2=6;
param3=0x78			
	定高飞行（旋翼）	0xB0	param1=0x81;
param2=6;
param3=0x79			
	定点悬停（旋翼）	0xB0	param1=0x81;
param2=6;
param3=0x7A
param4=航向
param5=高度		航向/高度经纬度
没有填值默认发-1	
模式切换指令	模态切换（复合翼）	0xB0	param1=0x81;
param2=6;
param3=注入值		0x53：固定翼模式
0x54：旋翼模式	
	手动模式	0xB0	param1=0x81,
param2 =1;			
	任务模式	0xB0	param1=0x81,
param2 =4;			
	降落模式	0xB0	param1=0x81,
param2 =5;			
	指点飞行	0xB0	param1=0x81,
param2 =7;
param5=lon,
param6 =lat;			
	返航	0xB0	param1=0x81, param2=8；			
	盘旋（固定翼）
悬停（旋翼）	0xB0	param1=0x81, param2=9；			
	地面等待	0xB0	param1=0x81, param2=10；			
	自稳模式	0xB0	param1=0x81,
param2 =11;			
	复飞	0xB0	param1=0x81;
param2=12;			
	编队飞行	0xB0	param1=0x81;
param2=13;			
	盘旋	0xB0	param1=0x81;
param2=14;
param3=type;		Type:1定圈；2定时	
	自毁	0xB0	param1=0x81;
param2=15;			
	应急伞降	0xB0	param1=0x81;
param2=21;			
	跟随模式	0xB0	param1=0x81,
param2 =23;
param3 =高度;		高度默认发-1	
	GPS末制导	0xB0	param1=0x81,
param2 =22；
param3 =lon(整数部分)；
param4 =lon(小数部分)；
param5 =lat(整数部分)；
param6 =lat(小数部分)；
param7 =alt；			
	空滑着陆	0xB0	param1=0x81,
param2 =25；			
	图像末制导	0xB0	param1=0x81,
param2 =29；			
	取消攻击	0xB0	param1=0x81;
param2 =26；			
	定向航点飞行	0xB0	param1=0x81;
param2 =27；
param3 =lon；
param4 = lat；
param5 = alt；
param6=psi；		Psi∈±180	
	定向航点盘旋	0xB0	param1=0x81;
param2 =28；
param3 =lon；
param4 = lat；
param5 = alt；
param6=psi；
param7=radius；		Psi∈±180
radius >0，顺时针;
radius <0，逆时针	
地面指令	起飞准备	0xB0	param1=0x81,
param2 =19;
param3=psi			
	起飞	0xB0	param1=0x81;
param2=2;
param3=0x81；			
	中止起飞	0xB0	param1=0x81;
param2=3;			
加解锁指令	加锁	0x0190	param1=0；			
	解锁	0x0190	param1=1；			
辅助飞行指令	副翼遥调	0xAF	param1=0x01;
param2=0x01;
param3=注入值			
	升降舵遥调	0xAF	param1=0x01;
param2=0x02;
param3=注入值			
	方向舵遥调	0xAF	param1=0x01;
param2=0x03;
param3=注入值			
	油门遥调	0xAF	param1=0x01;
param2=0x04;
param3=注入值			
	位置信号源	0xAF	param1=0x02;
param2=0x01;
param3=注入值		0x00:自动
0x01: 飞控GPS
0x02: 外置GPS
0x03: 外置EKF
0x04:飞控EKF	
	高度信号源	0xAF	param1=0x02;
param2=0x02;
param3=注入值		0x00:自动
0x01: 飞控GPS
0x02: 外置GPS
0x03: 外置baro
0x04: 内置baro
0x05: 外置EKF
0x06: 飞控EKF	
	空速信号源	0xAF	param1=0x02;
param2=0x03;
param3=注入值		0x00:自动
0x01:内置气压计
0x02:外置气压计
0x03:地速信号源	
	地速信号源	0xAF	param1=0x02;
param2=0x04;
param3=注入值		0x00:自动
0x01: 飞控GPS
0x02: 外置GPS
0x03: 空速信号源
0x04: 外置EKF
0x05: 飞控EKF	
	姿态信号源	0xAF	param1=0x02;
param2=0x05;
param3=注入值		0x00:自动
0x01:外置IMU
0x02:飞控IMU	
	航向角信号源	0xAF	param1=0x02;
param2=0x06;
param3=注入值		0x00:自动
0x01:外置MAG
0x02:内置MAG
0x03:航迹角	
	发动机熄火	0xAF	param1=0x03;
param2=注入值		0x01:发动机熄火按键
0x02:熄火复位按键	
	高度遥调	0xAF	param1=0x04;
param2=0x01;
param3=注入值		-1：取消遥调
>0：相对高度	
	速度遥调	0xAF	param1=0x04;
param2=0x02;
param3=注入值		-1：取消遥调
>0：遥调速度	
其他指令	开始仿真	0x03E8	param1=1			
	结束仿真	0x03E8	param1=0			
	着陆检测	0x03EB	param1=0（着陆检测关）/1（着陆检测开）			
	内存剩余空间检查	0x03EC				
惯导指令	惯导航向对准	0x AE	param1=0x01;
param2=航向角;			
	惯导杆臂装订	0x AE	param1=0x02;
param2=杆臂一x;
param3=杆臂一y;
param4=杆臂一z;
param5=杆臂二x;
param6=杆臂二y
param7=杆臂二z			
	惯导安装角	0x AE	param1=0x03;
param2=安装角x;
param3=安装角y;
param4=安装角z;			
移动基站偏差	基站安装偏差	0xBA	param1=0x01;
param2=偏差x;
param3=偏差y;
param4=偏差z;
			
参数更新	定圈盘旋	0x1389	param1=lat;
param2=lon;
param3=alt;
param4=vel;
param5=radius;
param6=isClockwise;
param7=RoundCnt;			
	定时盘旋	0x138A	param1=lat;
param2=lon;
param3=alt;
param4=vel;
param5=radius;
param6=isClockwise;
param7=time_sec;			
	Home点重置	0xB3	param1=1;			
	Home点设置	0xB3	param1=0;
param5=lat;
param6=lon;
param7=alt;			
	打印传感器状态	0x04D2	param1=4;			
	蜂鸣器播放	0x06				
云台控制	俯仰控制	0x1A20	param1=0;
param4=value;			
	方位控制	0x1A20	param1=1;
param4=value;			
	方位角限幅	0x1A20	param1=2;
param2=value;			




2.3CLASS_ID#03	遥杆指令帧
MSG_ID	0x00
字节偏移量	字节数	名称	类型	分辨率	单位	备注
0	2	Ch1	Uint16	1	—	1000-2000
2	2	Ch2	Uint16	1		
4	2	Ch3	Uint16	1		
6	2	Ch4	Uint16	1		
8	2	Ch5	Uint16	1		
10	2	Ch6	Uint16	1		
12	2	Ch7	Uint16	1		
14	2	Ch8	Uint16	1		
16	2	Ch9	Uint16	1		
18	2	Ch10	Uint16	1		
20	2	Ch11	Uint16	1		
22	2	Ch12	Uint16	1		
24	2	Ch13	Uint16	1		
26	2	Ch14	Uint16	1		
28	2	Ch15	Uint16	1		
30	2	Ch16	Uint16	1		
数据长度	30					

2.4CLASS_ID#04	差分指令帧
MSG_ID	0x00
字节偏移量	字节数	名称	类型	分辨率	单位	备注
0	110	差分数据内容	uint8 * 110	1	—	不做解析，直接转发
数据长度	110					

2.5遥测数据回报帧CLASS_ID#06
2.5.1MSG#0x01	 遥测数据格式回报帧
MSG_ID	ACK（0x01）
字节偏移量	字节数	名称	类型	分辨率	单位	备注
0	1	接受数据格式帧CLASS_ID	Uint8	1	—	
1	1	接受数据格式帧MSG_ID	Uint8	1		
2	1	接收数据组号	uint8	1	—	
数据长度	3					
2.6航线数据上行帧CLASS_ID#07

2.6.1MSG#0x01	装订航线信息数据帧
MSG_ID	ACK（0x01）
字节偏移量	字节数	名称	类型	分辨率	单位	备注
0	1	Airline[0]
航线编号	uint8		—	
1	1	Airline[0]
保存航线	uint8			IDLE = 0
UPLOAD = 1
STORED = 2
2	1	Airline[0]
使用航线	uint8				
3	2	Airline[0]
航点个数	uint16			
5	2	Airline[0]
航线类型	uint16			
7-62		……				
63	1	Airline[9]
航线编号	uint8			
64	1	Airline[9]
保存航线	uint8			
65	1	Airline[9]
使用航线	uint8			
66	2	Airline[9]
航点个数	uint16			
68	2	Airline[9]
航线类型	uint16			
数据长度	69					


2.6.2MSG#0x01	航点信息数据帧
MSG_ID	ACK（0x01）
字节偏移量	字节数	名称	类型	分辨率	单位	备注
0	1	航点类型	Uint8	1	—	
1	1	航点号	Uint8	1		
2	1	高度类型	Uint8			0：海拔高度
3：相对高度	
3	1	是否继续下一航点	Uint8			0：否
1：是
4	4	纬度	Float			
8	4	经度	Float			
12	4	高度	Float			
16	4	参数1	Float			
20	4	参数2	Float			
24	4	参数3	Float			
28	4	参数4	Float			
数据长度	3					

2.6.3清除航线帧
MSG_ID	ACK（0x01）
字节偏移量	字节数	名称	类型	分辨率	单位	备注
数据长度	0					

2.6.4激活航线帧
MSG_ID	ACK（0x01）
字节偏移量	字节数	名称	类型	分辨率	单位	备注
	1	起飞航线序号	uint8			101：旋翼航线
22：起飞航线
16：巡航航线
21：降落航线
	2	起飞航线类型	uint16			
	1	导航航线序号	uint8			
	2	导航航线类型	uint16			
	1	降落航线序号	uint8			
	2	降落航线类型	uint16			
数据长度	9					

2.6.5MSG#0x02	请求所有航线信息数据帧
MSG_ID	ACK（0x02）
字节偏移量	字节数	名称	类型	分辨率	单位	备注
数据长度	0					
2.6.6MSG#0x03	请求单条航线航路点信息数据帧
MSG_ID	ACK（0x02）
字节偏移量	字节数	名称	类型	分辨率	单位	备注
1	Uint8	航线号				
1	Uint8	航点号				
数据长度	2					
2.6.7请求标记航点帧
MSG_ID	ACK（0x02）
字节偏移量	字节数	名称	类型	分辨率	单位	备注
1	Uint8	航线号				
1	Uint8	航点号				
数据长度	2					
2.7参数上行帧CLASS_ID#08
2.7.1MSG#0x01	请求参数列表指令帧
MSG_ID	ACK（0x02）
字节偏移量	字节数	名称	类型	分辨率	单位	备注
数据长度	0					
2.7.2MSG#0x02	参数设置指令帧
MSG_ID	ACK（0x02）
字节偏移量	字节数	名称	类型	分辨率	单位	备注
0	16	参数名称	char			
16	1	参数类型	uint8			参数类型
Int32:6
Float:9
17	4	参数值	Float			
数据长度	21					

3下行消息定义（空中-地面）

3.1CLASS_ID#10	飞行遥测帧定义
消息类型	MSG_ID	名称	描述
心跳监测	0x01	心跳帧	HEART_BEAT	心跳监测
指令回报	0x02	指令回报	DATA_ACK	上行指令的回报以及查询指令的结果回报。包含响应结果、附加信息。
提示信息	0x03	提示信息	DATA_INFO	提示信息为汉字提示。
飞行状态	0x04	飞行状态数据	DATA_FlightState	HUD区域所的姿态、速度、位置、高度、星数信息。
GNC信息	0x10	导航制导数据	DATA_GuideNav	飞控状态区域的导航、制导相关的模式、状态、指令输出，任务模式等。
	0x11	控制器数据	DATA_Controller	各控制器的模式、状态、输出指令、中间标志等信息
飞行管理信息	0x20			
	0x22	飞行管理信息	DATA_FlightMngmt	飞机系统状态、BIT状态、通信品质监测等；
	0x23	设备频率信息		设备通信频率
	0x27	机载系统管理信息	DATA_EquipMngmt	发动机、燃油、电气、襟翼等子系统管理信息
	0x28			
	0x29	故障管理数据	DATA_EMERGE	设备、链路、飞行状态等故障监测结果，相应的故障处置信息；
	0x2A	PBIT信息		飞行前自检测信息
传感器设备	0x30	组合导航	DATA_SENS_INS1	
	0x35	卫星定位定向系统	DATA_SENS_GNSS1	
	0x3A	大气机	DATA_SENS_ADC1	
	0x40	无线电高度表	DATA_SENS_ALT1	
	0x41	抗干扰卫星导航		抗干扰模式切换
舵控系统	0x50			
	0x51	舵控系统1		
	0x52	舵控系统2		
	0x53~0x5F	备用		
动力系统数据及子设备数据	0x60	动力系统数据	DATA_ENGINE	发动机、燃油等系统状态数据
	0x61~0x6F			
配电系统数据及子设备数据	0x70	配电管理盒	DEV_PWR_DISTR	
	0x71~0x7F	备用		
其它设备数据	0x80~0x8F			
起落架系统数据及子设备数据	0x90			
	0x91	刹车控制器		
	0x92~0x9F	备用		
任务子系统	0xA0	升降机构		
日志记录扩展	0xC0	仅需记录日志数据		

帧划分原则：
1）划分方法：分状态数据和设备数据两大类。	
2）颗粒度：为提高效率，不追求过小颗粒度；设备类可使用小颗粒度，按设备划分；状态类数据则使用大颗粒度；
3.1.1   MSG#0x00	 空数据
无数据。
3.1.2   MSG#0x01	 心跳包
MSG_ID	HEART_BEAT（0x01）
字节偏移量	字节数	名称	类型	分辨率	单位	备注
0	4	心跳计数	uint32	1	—	心跳计数为心跳帧发送次数
数据长度	4					

3.1.3   MSG#0x02	 指令回报
MSG_ID	ACK（0x02）
字节偏移量	字节数	名称	类型	分辨率	单位	备注
0	2	指令码	uint16	1	—	
2	1	指令响应情况	uint8	1	—	0x01：响应，0x02：拒绝
3	0或41	指令响应附加信息	uint8	—	—	没有附加信息的，该信息长度为0字节，有附加信息的，该信息长度都是41字节。
数据长度	3或44					

说明：
1.航点查询，航线查询返回的指令响应附加信息与航点装订时的附加信息数据格式一致。
2. 航线状态信息请求，跑道状态信息请求，指令响应附加信息数据格式见下表。
3.地理围栏顶点查询，返回的指令响应附加信息与装订时的附加信息数据格式一致。
3.1.4   MSG#0x03	 提示信息
MSG_ID	INFO（0x03）
字节偏移量	字节数	名称	类型	分辨率	单位	备注
0	40	提示信息	uint8 * 40	1	—	使用GBK编码
数据长度	40					

3.1.5   MSG#0x04	 飞行状态数据
MSG_ID	DATA_FLIGHT_SATAE（0x04）
字节偏移量	字节数	名称	类型	分辨率	单位	备注
0	2	滚转角速率	int16	0.1	°/s	
2	2	俯仰角速率	int16	0.1	°/s	
4	2	偏航角速率	int16	0.1	°/s	
6	2	滚转角	int16	0.1	°	-180 ~ +180°
8	2	俯仰角	int16	0.1	°	-90 ~ +90°
10	2	航向角	int16	0.1	°	0 ~ 360°
12	2	航迹角	int16	0.1	°	0 ~ 360°
14	2	迎角	int16	0.1	°	
16	2	侧滑角	int16	0.1	°	
18	2	指示空速	int16	0.1	Km/h	
20	2	真空速	int16	0.1	Km/h	
22	2	地速	int16	0.1	Km/h	
24	2	升降速度	int16	0.1	m/s	
26	4	经度	int32	1e-6	°	
30	4	纬度	int32	1e-6	°	
34	2	海拔高度	uint16	y=x / (65535 / 10500) - 500	m	-500 ~ 10000m
36	1	可见星数	uint8	1	—	
37	1	定位模式	uint8	1	—	0x00：无效定位
0x01：单点定位
0x02：准确定位
0x03：伪距定位
0x04：RTK定位
38	2	气压高度	uint16	y=x / (65535 / 10500) - 500	m	-500 ~ 10000m
40	2	相对场高	uint16	y=x / (65535 / 10500) - 500	m	-500 ~ 10000m
42	2	无线电高度	uint16	0.1	m	
44	4	待飞距离	int32	1	m	
48	2	侧偏距	int16	0.1	m	
50	2	高度差	int16	0.1	m	
52	2	Home点距离	uint16	0.1	Km	
						
数据长度	54					

3.1.6   MSG#0x10	 导航制导数据
MSG_ID	DATA_GUIDE_NAV
字节偏移量	字节数	名称	类型	分辨率	单位	备注
0	1	解锁状态	uint8	1	—	0-加锁，
1-1-解锁，
2-2-飞行
1	1	飞行模式	uint8	1		见飞行模式表
	1	飞行模态	uint8	1		旋翼
固定翼
正向过度
反向过度
2	1	纵向模态	uint8	1	—	？
3	1	横向模态	uint8	1	—	
4		垂向模态	uint8	1		
5	1					
6	1	链路源	uint8	1	—	0x00：失效(标红)
0x01：主链
0x02：备链
7	1	姿态源	uint8	惯导：	—	0x01：惯导
0x02：备惯导
0x04：大气机
0x0A：卫星定位
0x0B：抗干扰定位
0x0C：无高
0x22：航向角源
0x23：航迹角源
0x24：地速源
0x25：空速源
0x2F：无效
8	1	航向角源	uint8	卫星：
惯导：
航迹角源：	—	
9	1	航迹角源	uint8	卫星：
惯导：
抗干扰定位：
航向角源：	—	
10	1	位置源	uint8	卫星：
惯导：
抗干扰定位：	—	
11	1	高度源	uint8	惯导：
卫星：
抗干扰定位：
大气机：
无高：	—	
12	1	空速源	uint8	大气机：
地速源：	—	
13	1	地速源	uint8	卫星：
惯导：
抗干扰定位：
空速源：	—	
14	1	升降速度源	uint8	卫星：
惯导：
抗干扰定位：
大气机：	—	
15	1	角速率源	uint8	惯导：
备惯导	—	
						
						
						
						
						
数据长度	21					
表 2 飞行模式
模式	数值
手动模式	0
自动起飞	1
自动停止起飞	2
自动任务	3
自动降落	4
自动控制	5
自动盘旋	6
自动返航	7
自动指点飞行	8
地面等待	9
自稳模式	10
位置控制	11
复飞	12
编队形成	13
编队保持	14
编队解散	15
编队退出	16
编队飞行	17
盘旋	18
迫降	19
自毁	20
操纵检查	21
起飞准备	22
应急伞降	23
GPS末制导	24
图像末制导	25
任务机-盘旋	26
任务机-指点飞行	27
任务机-攻击	28
任务机-攻击退出	29
任务机-定航向盘旋	30
任务机-自毁	31
任务机-降落	32
自动跟随	33
应急着陆	34
空滑着陆	35

3.1.7   MSG#0x11	固定翼 控制器数据
MSG_ID	0x11
字节偏移量	字节数	名称	类型	分辨率	单位	备注
0	2	升降舵控制量	int16	0.01	°	
2	2	副翼控制量	int16	0.01	°	
4	2	方向舵控制量	int16	0.01	°	
6	2	襟翼控制量	int16	0.01	°	
8	2	前轮纠偏控制量	int16	0.01	°	
10	1	油门控制量	int8	1	%	0 ~ 100%
11	1	滚转角限幅	uint8	0.2	%	0 ~ 30
12	1	刹车控制量	int8	1	%	0 ~ 100%
13	1	左刹车控制量	int8	1	%	0 ~ 100%
14	1	右刹车控制量	int8	1	%	0 ~ 100%
15	1	刹车纠偏控制量	int8	1	%	-50% ~ 50%
16	2	高度指令	uint16	y=x / (65535 / 10500) - 500	m	-500 ~ 10000m
18	2	升降速度指令	int16	0.01	m/s	
20	2	速度指令	int16	0.01	m/s	
22	2	俯仰角指令	int16	0.01	°	
24	2	滚转角指令	int16	0.01	°	
26	2	航向指令	uint16	0.01	°	
28	2	俯仰角积分	int16	0.001	—	
30	2	升降速度积分	int16	0.001	—	
32	2	高度积分	int16	0.001	—	
34	2	侧偏积分	int16	0.001	—	
36	2	航向积分	int16	0.001	—	
38	2	速度俯仰积分	int16	0.001	—	
40	2	速度油门积分	int16	0.001	—	
数据长度	42					

3.1.8   MSG#0x22	 飞行管理信息
MSG_ID	DATA_FLIGHT_MNGMT（0x22）
字节偏移量	字节数	名称	类型	分辨率	单位	备注
0	1	CPU余度	uint8	1	—	0x01：主，0x00：备
1	1	CPU利用率	uint8	1	%	
2	8	设备通信状态	uint8 * 8	1	—	见下表
10	1	主链上行通信质量	uint8	1	%	0 ~ 100%
11	1	预备有效状态	uint8	1	—	0x01：有效（绿色灯）
0x00：无效（灰色灯）
12	2	剩余距离	uint16	0.1	km	
14	2	飞行时长	uint16	1	秒	
16	2	续航时间	uint16	1	min	
18	2	续航里程	uint16	1	Km	
20	2	开车时长	uint16	1	秒	
22	2	电子围栏	uint16	1	km	
24	2	起飞重量	uint16	1	Kg	
26	1	重心位置	uint8	1	%	
27	1	空地状态	uint8	1	—	0x00：地面，0x01：空中
28	1	起飞前自检	uint8		—	1：自检通过（绿色灯）
0：自检失败（红色灯）
29	1	异地起降	uint8	1		0x00:非使能
0x01:使能
30	1	备链上行通信质量	uint8	1	%	0 ~ 100%
数据长度	31					

表3.6.10-A 	 设备通信状态
字节			
0	bit 0 - 1	组合导航	00：通信彻底断开(灰色)
01：通信频率低(红色)
10：通信频率高(黄色)
11：通信正常(绿色)
	bit 2 – 3	大气机	
	bit 4 – 5	卫星定位定向系统	
	bit 6 – 7	无线电高度表	
1	bit 0 - 1	油量传感器	同上
	bit 2 – 3	电源稳压器	
	bit 4 – 5	配电控制盒	
	bit 6 – 7	ECU	
2	bit 0 - 1	备链路	同上
	bit 2 - 3	主链路	
	bit 4 – 5	差分定位	
	bit 6 – 7	抗干扰卫星导航	
3	bit 0 - 1	伺服1	同上
	bit 2 - 3	伺服2	
	bit 4 – 5	伺服3	
	bit 6 – 7	伺服4	
4	bit 0 - 1	伺服5	同上
	bit 2 - 3	伺服6	
	bit 4 – 5	伺服7	
	bit 6 - 7	伺服8	
5	bit 0 - 1	伺服9	同上
	bit 2 - 3	伺服10	
	bit 4 – 5	伺服11	
	bit 6 - 7	伺服12	
6	bit 0 - 1	伺服13	同上
	bit 2 - 3	伺服14	
	bit 4 – 5	伺服15	
	bit 6 - 7	伺服16	
7	备用		

3.1.9MSG#0x29	 故障管理数据
MSG_ID	DATA_EMERGE（0x29）
字节偏移量	字节数	名称	类型	分辨率	单位	备注
0	1	链路失效处置	uint8	1	—	0x00：不处理
0x01：返航
1	1	故障处置标志	uint8	Bit0：故障自主处置
Bit1-7：备用	—	1：使能，0：禁止
2	19	告警信息	uint8	每个bit表示一条告警信息	—	1：告警，0：不告警
21	19	是否屏蔽
告警信息	uint8	同上	—	1：屏蔽，0：不屏蔽
数据长度	40					
注：
a)1级告警（红色字符串）：发生严重的故障，预计已经开始或很快将会开始影响飞行安全；
b)2级告警（黄色字符串）：发生重要的故障，预计可能会在后续飞行中影响飞行安全；
c)3级告警（灰色字符串）：发生一般的故障，不会或预计大概率不会影响飞行安全；
d)优先级从高到低： 1级->2级->3级；
e)高优先级的应靠前显示。
表4.5.11-A 故障告警数据
所属
系统	字节号	位序号	告警名称	备注	告警
优先级	告警显示字符串内容
设备
通信	0	0	组合导航通信异常	0：不告警 
1：告警	2	“通信异常—组合导航”
		1	卫星定位通信异常	同上	3	“通信异常—卫星定位”
		2	大气机通信异常	同上	2	“通信异常—大气机”
		3	无线电高度表通信异常	同上	3	“通信异常—无线电高度表”
		4	ECU通信异常	同上	3	“通信异常—ECU”
		5	油量传感器通信异常	同上	3	“通信异常—油量传感器”
		6	配电管理盒通信异常	同上	3	“通信异常—配电管理盒”
		7	刹车控制器通信异常	同上	3	“通信异常—刹车控制器”
	1	0	电源稳压器通信异常	同上	3	“通信异常—电源稳压器”
		1	差分定位通信异常	同上	3	“通信异常—差分定位”
		2	通信链路通信异常	同上	2	“通信异常—链路”
		3	升降机构通信异常	同上	3	“通信异常—升降机构”
		4	抗干扰卫星定位通信异常	同上	3	“通信异常—抗干扰卫星定位”
		5	主链路通信异常	同上	3	“通信异常—主链路”
		6	备链路通信异常	同上	3	“通信异常—备链路”
		7	备用			
	2	0	左副翼内侧舵机通信异常	同上	2	“舵通信异常—左副翼内侧”
		1	右副翼内侧舵机通信异常	同上	2	“舵通信异常—右副翼内侧”
		2	左襟翼内侧舵机通信异常	同上	2	“舵通信异常—左襟翼内侧”
		3	右襟翼内侧舵机通信异常	同上	2	“舵通信异常—右襟翼内侧”
		4	左V尾内侧舵机通信异常	同上	2	“舵通信异常—左V尾内侧”
		5	右V尾内侧舵机通信异常	同上	2	“舵通信异常—右V尾内侧”
		6	前轮转向舵机通信异常	同上	2	“舵通信异常—前轮转向”
		7				
	3	0	左副翼外侧舵机通信异常	同上	2	“舵通信异常—左副翼外侧”
		1	右副翼外侧舵机通信异常	同上	2	“舵通信异常—右副翼外侧”
		2	左襟翼外侧舵机通信异常	同上	2	“舵通信异常—左襟翼外侧”
		3	右襟翼外侧舵机通信异常	同上	2	“舵通信异常—右襟翼外侧”
		4	左V尾外侧舵机通信异常	同上	2	“舵通信异常—左V尾外侧”
		5	右V尾外侧舵机通信异常	同上	2	“舵通信异常—右V尾外侧”
		6				
		7				
传感器分系统	4	0	组合导航故障	同上	2	“组合导航故障”
		1	卫星定位故障	同上	2	“卫星定位系统故障”
		2	大气机故障	同上	2	“大气机故障”
		3	无线电高度表故障	同上	3	“无高表故障”
		4	组合导航差分失效	同上	3	“组合导航差分失效”
		5	卫星定位差分失效	同上	3	“卫星定位差分失效”
		6	差分定位全部失效	同上	3	“差分定位全部失效”
		7	攻角信号失效	同上	3	“攻角失效”
	5	0	侧滑角信号失效	同上	3	“侧滑角失效”
		1	高度信号源全部丢失	同上	1	“高度源全部丢失”
		2	空速信号源全部丢失	同上	2	“空速源全部丢失”
		3	地速信号源全部丢失	同上	2	“地速源全部丢失”
		4	姿态信号源全部丢失	同上	1	“姿态源全部丢失”
		5	位置信号源全部丢失	同上	1	“位置源全部丢失”
		6	航向角信号源全部丢失	同上	1	“航向角源全部丢失”
		7	航迹角信号源全部丢失	同上	2	“航迹角源全部丢失”
	6	0	升降速度信号源全部丢失	同上	2	“升降速度源全部丢失”
		1	角速度信号源全部丢失	同上	2	“角速度源全部丢失”
		2	抗干扰卫星定位故障	同上	2	“抗干扰卫星定位故障”
		3~7				
伺服作动系统	7	0	左副翼内侧舵机反馈异常	同上	2	“舵反馈异常—左副翼内侧”
		1	右副翼内侧舵机反馈异常	同上	2	“舵反馈异常—右副翼内侧”
		2	左襟翼内侧舵机反馈异常	同上	2	“舵反馈异常—左襟翼内侧”
		3	右襟翼内侧舵机反馈异常	同上	2	“舵反馈异常—右襟翼内侧”
		4	左V尾内侧舵机反馈异常	同上	2	“舵反馈异常—左V尾内侧”
		5	右V尾内侧舵机反馈异常	同上	2	“舵反馈异常—右V尾内侧”
		6	前轮转向舵机反馈异常	同上	2	“舵反馈异常—前轮转向”
		7				
	8	0	左副翼外侧舵机反馈异常	同上	2	“舵反馈异常—左副翼外侧”
		1	右副翼外侧舵机反馈异常	同上	2	“舵反馈异常—右副翼外侧”
		2	左襟翼外侧舵机反馈异常	同上	2	“舵反馈异常—左襟翼外侧”
		3	右襟翼外侧舵机反馈异常	同上	2	“舵反馈异常—右襟翼外侧”
		4	左V尾外侧舵机反馈异常	同上	2	“舵反馈异常—左V尾外侧”
		5	右V尾外侧舵机反馈异常	同上	2	“舵反馈异常—右V尾外侧”
		6				
		7				
	9	0	左副翼内侧舵机状态异常	同上	2	“舵状态异常—左副翼内侧”
		1	右副翼内侧舵机状态异常	同上	2	“舵状态异常—右副翼内侧”
		2	左襟翼内侧舵机状态异常	同上	2	“舵状态异常—左襟翼内侧”
		3	右襟翼内侧舵机状态异常	同上	2	“舵状态异常—右襟翼内侧”
		4	左V尾内侧舵机状态异常	同上	2	“舵状态异常—左V尾内侧”
		5	右V尾内侧舵机状态异常	同上	2	“舵状态异常—右V尾内侧”
		6	前轮转向舵机状态异常	同上	2	“舵状态异常—前轮转向”
		7				
	10	0	左副翼外侧舵机状态异常	同上	2	“舵状态异常—左副翼外侧”
		1	右副翼外侧舵机状态异常	同上	2	“舵状态异常—右副翼外侧”
		2	左襟翼外侧舵机状态异常	同上	2	“舵状态异常—左襟翼外侧”
		3	右襟翼外侧舵机状态异常	同上	2	“舵状态异常—右襟翼外侧”
		4	左V尾外侧舵机状态异常	同上	2	“舵状态异常—左V尾外侧”
		5	右V尾外侧舵机状态异常	同上	2	“舵状态异常—右V尾外侧”
		6				
		7				
刹车系统	11	0	左刹车反馈异常	同上	2	“左刹车反馈异常”
		1	右刹车反馈异常	同上	2	“右刹车反馈异常”
		2	刹车控制器异常	同上	2	“刹车控制器异常”
		3				
		4				
		5				
		6				
		7				
电气
系统	12	0	配电管理盒故障	同上	1	“配电管理盒故障”
		1	蓄电池1电量低	同上	2	“蓄电池1电量低”
		2	蓄电池2电量低	同上	2	“蓄电池2电量低”
		3	蓄电池全部电量低	同上	2	“蓄电池全部电量低”
		4	发电机失效	同上	2	“发电机失效”
		5	电源稳压器故障	同上	2	“电源稳压器故障”
		6	配电通道一级供电异常	同上	1	“配电通道一级供电异常”
		7	配电通道二级供电异常	同上	2	“配电通道二级供电异常”
	13	0	汇流条电压过压	同上	1	“汇流条过压”
		1	汇流条电压欠压	同上	1	“汇流条欠压”
		2	全机掉电	同上	1	“全机掉电”
		3~7	备用	同上	—	—
动力
系统	14	0	发动机转速偏高	同上	2	“发动机—转速过高”
		1	发动机转速偏低	同上	2	“发动机—转速过低”
		2	发动机空中停车	同上	1	“发动机—空中停车”
		3	发动机火警	同上	1	“发动机—火警”
		4	发动机缸温1偏高	同上	2	“发动机—缸温1高”
		5	发动机缸温1偏低	同上	2	“发动机—缸温1低”
		6	发动机缸温2偏高	同上	2	“发动机—缸温2高”
		7	发动机缸温2偏低	同上	2	“发动机—缸温2低”
	15	0	发动机缸温3偏高	同上	2	“发动机—缸温3高”
		1	发动机缸温3偏低	同上	2	“发动机—缸温3低”
		2	发动机缸温4偏高	同上	2	“发动机—缸温4高”
		3	发动机缸温4偏低	同上	2	“发动机—缸温4低”
		4	燃油压力低	同上	2	“发动机-燃油压力低”
		5	发动机ECU异常	同上	2	“发动机—ECU异常”
		6	油箱油量不足	同上	2	“发动机—油箱油量不足”
		7	发动机油门反馈异常	同上	2	“发动机—油门反馈异常”
任务载荷	16	0	任务载荷1异常	同上	3	“任务载荷1异常”
		1	任务载荷2异常	同上	3	“任务载荷2异常”
		2	任务载荷3异常	同上	3	“任务载荷3异常”
		3~7				
飞控	17	0	CPU余度降级	同上	2	“CPU余度降级”
		1	CPU利用率过大	同上	2	“CPU利用率过大”
		2~7				
飞行状态	18	0	指令滑行距离过长	同上	2	“滑行过长”
		1	起飞滑跑距离过长	同上	2	“起飞滑跑过长”
		2	滑跑控制偏差超限	同上	2	“滑跑偏差大”
		3	着陆控制偏差超限	同上	2	“着陆偏差大”
		4	迎角超限	同上	1	“迎角过大”
		5	滚转超限	同上	2	“滚转过大”
		6	速度过高	同上	2	“速度过高”
		7	速度过低	同上	1	“速度过低”

3.1.10 MSG#0x2A	 PBIT信息
MSG_ID	DATA_PBIT（0x2A）
字节偏移量	字节数	名称	类型	分辨率	单位	备注
0	1	PBIT信息	uint8	Bit0~1：组合导航状态
Bit2~3：大气机状态
Bit4~5：卫星定位状态
Bit6~7：无高状态	—	0b11：自检通过
（显示为绿灯）
0b10：自检失败
（显示为红灯）
0b01：自检失败且已屏蔽（显示为黄灯）
0b00：不自检
（显示为灰灯）
1	1	PBIT信息	uint8	Bit0~1：组合导航高度漂移
Bit2~3：卫星定位高度漂移
Bit4~5：大气机气压高度漂移
Bit6~7：无线电高度漂移	—	同上
2	1	PBIT信息	uint8	Bit0~1：组合导航差分状态
Bit2~3：卫星定位差分状态
Bit4~5：未使用默认信号源
Bit6~7：	—	同上
3	1	PBIT信息	uint8	Bit0~1：INS1和GNSS1高度差异过大
Bit2~3：INS1和GNSS1航向差异过大
Bit4~5：
Bit6~7：滑行可用跑道距离过短	—	同上
4	1	PBIT信息	uint8	Bit0~1：停机俯仰角状态
Bit2~3：停机滚转角状态
Bit4~5：航向未对准跑道
Bit6~7：初始位置侧偏过大	—	同上
5	1	PBIT信息	uint8	Bit0~1：起飞可用跑道距离过短
Bit2~3：起飞跑道未激活
Bit4~5：着陆跑道未激活
Bit6~7：飞行航线未激活	—	同上
6	1	PBIT信息	uint8	Bit0~1：着陆航线未激活
Bit2~3：CPU余度状态
Bit4~5：CPU利用率过大
Bit6~7：起飞襟翼构型状态	—	同上
7	1	PBIT信息	uint8	Bit0~1：升降舵非中位
Bit2~3：副翼非中位
Bit4~5：方向舵非中位
Bit6~7：刹车纠偏未关闭	—	同上
8	1	PBIT信息	uint8	Bit0~1：前轮纠偏未关闭
Bit2~3：舵机反馈异常
Bit4~5：舵机状态故障
Bit6~7：舵机通信异常	—	同上
9	1	PBIT信息	uint8	Bit0~1：电源稳压器状态
Bit2~3：电源稳压器通信
Bit4~5：配电管理盒状态
Bit6~7：配电管理盒通信	—	同上
10	1	PBIT信息	uint8	Bit0~1：燃油系统状态
Bit2~3：燃油系统通信
Bit4~5：动力系统状态
Bit6~7：动力系统通信	—	同上
11	1	PBIT信息	uint8	Bit0~1：发动机非慢车
Bit2~3：油门反馈异常
Bit4~5：刹车控制器状态
Bit6~7：刹车控制器通信	—	同上
12	1	PBIT信息	uint8	Bit0~1：蓄电池状态
Bit2~3：发电机状态
Bit4~5：汇流条电压状态
Bit6~7：链路通信状态	—	同上
数据长度	13					

3.1.11 MSG#0x30  组合导航
MSG_ID	0x30
字节偏移量	字节数	名称	类型	分辨率	单位	备注
0	2	滚转角	int16	0.1	°	-180~+180
2	2	俯仰角	int16	0.1	°	-90~+90
4	2	航向角	int16	0.1	°	0 ~ 360°
6	2	航迹角	int16	0.1	°	0 ~ 360°
8	2	滚转角速率	int16	0.1	°/s	
10	2	俯仰角速率	int16	0.1	°/s	
12	2	偏航角速率	int16	0.1	°/s	
14	2	地速	int16	0.1	Km/h	
16	2	升降速度	int16	0.1	m/s	
18	4	经度	int32	1e-6	°	
22	4	纬度	int32	1e-6	°	
26	2	海拔高度	uint16	y=x / (65535 / 10500) - 500	m	-500 ~ 10000m
28	1	轴向过载	int8	0.1	g	-10 ~ 10g 
29	1	侧向过载	int8	0.1	g	-10 ~ 10g
30	1	法向过载	int8	0.1	g	-10 ~ 10g
31	1	可见星数	uint8	1	—	
32	1	导航模式	uint8	1	—	0x00：N/A
0x01：INS/大气
0x02：INS/DGPS
0x03：INS/GNSS
0x05：GNSS
33	1	定位模式	uint8	1		0x00：无效定位
0x01：单点定位
0x02：准确定位
0x03：伪距定位
0x04：RTK定位
34	1	GPS年	uint8	y = x + 2020	—	
35	1	GPS月	uint8	1	—	
36	1	GPS日	uint8	1	—	
37	1	GPS时	uint8	1	—	
38	1	GPS分	uint8	1	—	
39	1	GPS秒	uint8	1	—	
40	1	工作状态	uint8	1	—	0x00：准备
0x01：对准中
0x02：导航
0x03：对准失败
41	4	状态字	uint32	Bit0：滚转角有效性
Bit1：俯仰角有效性
Bit2：航向角有效性
Bit3：水平位置有效性
Bit4：速度有效性
Bit5：高度有效性
Bit6：天向速度有效性
Bit7：GPS时有效性
Bit8： 滚转角速率有效性
Bit9： 俯仰角速率有效性
Bit10：偏航角速率有效性
Bit11：轴向过载有效性
Bit12：侧向过载有效性
Bit13：法向过载有效性
Bit14: 主惯状态
Bit15：IMU状态
Bit16：DGPS状态
Bit17：卫星状态
Bit18：单点定位
Bit19：伪距差分
Bit20：内/外接收机
Bit21：航迹角有效性
Bit22：加速度有效性
Bit23：偏航角加速度有效性
Bit24~31：备用	—	用于描述数据有效性等
Bit0~13，Bit17~19，Bit21~23：
1：有效，0：无效(标红)
Bit14~15：
1：正常，0：故障
Bit16：
1：差分：非差分
Bit20：
1：外部，0：内部
45	4	故障字	uint32	Bit0：422总线故障
Bit1：AX超温告警
Bit2：AY超温告警
Bit3：AZ超温告警
Bit4：量化器温度告警
Bit5：GX超温告警
Bit6：GY超温告警
Bit7：GZ超温告警
Bit8：地速超差检测
Bit9：对准不通过
Bit10：飞机移动
Bit11：陀螺未超量程
Bit12：加计未超量程
Bit13：x陀螺数据合理性
Bit14：y陀螺数据合理性
Bit15：z陀螺数据合理性
Bit16：x加计数据合理性
Bit17：y加计数据合理性
Bit18：z加计数据合理性
Bit19：接收机通信故障
Bit20：接收供电故障
Bit21：天线故障
Bit22：秒脉冲故障
Bit23：内存检测错误
Bit24：E2PROM参数检测错误
Bit25：惯导数据无效
Bit26~31：备用	—	用于描述设备故障等
Bit0，Bit19~25
1：正常，0：故障(标红)
Bit1~18：
1：正常，0：告警(标红)
49	1	故障级别	uint8	1	—	等级1~4,级别1最高
0x00：0级（无故障）
0x01：1级
0x02：2级
0x03：3级
0x04：4级
数据长度	50					

3.1.12 MSG#0x35  卫星定位定向系统
MSG_ID	0x35
字节偏移量	字节数	名称	类型	分辨率	单位	备注
0	4	经度	int32	1e-6	°	
4	4	纬度	int32	1e-6	°	
8	2	海拔高度	uint16	y=x / (65535 / 10500) - 500	m	
10	2	航向角	int16	0.1	°	0 ~ 360°
12	2	航迹角	int16	0.1	°	0 ~ 360°
14	2	地速	int16	0.1	Km/h	
16	2	升降速度	int16	0.1	m/s	
18	2	HDOP	uint16	0.01	m	
20	2	VDOP	uint16	0.01	m	
22	1	GPS年	uint8	y = x + 2020	—	
23	1	GPS月	uint8	1	—	
24	1	GPS日	uint8	1	—	
25	1	GPS时	uint8	1	—	
26	1	GPS分	uint8	1	—	
27	1	GPS秒	uint8	1	—	
28	1	可见星数	uint8	1	—	
29	1	定位模式	uint8	1	—	0x00：无效定位
0x01：单点定位
0x02：准确定位
0x03：伪距定位
0x04：RTK定位
30	2	状态字	uint16	Bit0：备用
Bit1：航迹角有效性
Bit2：航向角有效性
Bit3：水平位置有效性
Bit4：速度有效性
Bit5：高度有效性
Bit6：天向速度有效性
Bit7：GPS时有效性
Bit8~15：预留	—	用于描述数据有效性等
1：有效，0：无效(标红)
32	2	故障字	uint16		—	用于描述设备硬件状态
1：正常，0：故障(标红)
34	2	备用	uint8 * 2			
数据长度	36					

3.1.13 MSG#0x3A  大气机
MSG_ID	0x3A
字节偏移量	字节数	名称	类型	分辨率	单位	备注
0	2	气压高度	uint16	y=x / (65535 / 10500) - 500	m	
2	2	指示空速	int16	0.1	Km/h	
4	2	真空速	int16	0.1	Km/h	
6	2	升降速度	int16	0.1	m/s	
8	2	迎角	int16	0.1	°	
10	2	侧滑角	int16	0.1	°	
12	2	总温	int16	0.1	°	
14	2	静温	int16	0.1	°	
16	2	动压	int16	0.1	kpa	
18	2	静压	int16	0.1	kpa	
20	1	大气密度比	uint8	0.01	—	
21	1	马赫数	uint8	0.01	—	
22	1	空速管加温模式	uint8	1	—	0x33:强制加温
0x66:强制不加温
0x99:自动加温
23	1	空速管加温状态	uint8	1	—	0x55:加温状态
0xAA:不加温状态
24	2	状态字	uint16	Bit0：气压高度有效性
Bit1：指示空速有效性
Bit2：真空速有效性
Bit3：升降速度有效性
Bit4：迎角有效性
Bit5：侧滑角有效性
Bit6：总温有效性
Bit7：静温有效性
Bit8：动压有效性
Bit9：静压有效性
Bit10：大气密度比有效性
Bit11：马赫数有效性
Bit12~Bit15：备用	—	用于描述数据有效性等
1：有效，0：无效(标红)
26	2	故障字	uint16	Bit0：静压传感器故障字
Bit1：动压传感器故障字
Bit2：静温传感器故障字
Bit3：攻角传感器 1 故障字
Bit4：攻角传感器 2 故障字
Bit5：侧滑角传感器 1 故障字 
Bit6：侧滑角传感器 2 故障字
Bit7：加温故障字
Bit8：外部存储器故障字
Bit9：双余度攻角不跟随故障字
Bit10：双余度侧滑角不跟随故障字
Bit11：动压传感器零位过度修正
Bit12：备用
Bit13：备用
Bit14：大气数据计算机内部过热 
Bit15：大气数据计算机故障字 	—	用于描述设备硬件状态
bit11：
1：正常，
0：过度修正(标红)
bit14：
1：正常，
0：过热(标红)
其余bit：
1：正常，
0：故障(标红)

数据长度	28					

3.1.14 MSG#0x40  无线电高度表
MSG_ID	0x40
字节偏移量	字节数	名称	类型	分辨率	单位	备注
0	2	无线电高度	uint16	0.1	m	
2	1	状态字	uint8	Bit0：高度有效性	—	用于描述数据有效性等
1：有效，0：无效(标红)
数据长度	3					




3.1.15 MSG#0x41  抗干扰卫星导航
MSG_ID	0x41
字节偏移量	字节数	名称	类型	分辨率	单位	备注
0	1	干扰状态与模式	uint8	1	—	Bit0：（外界干扰状态）
1：有干扰， 0：无干扰
Bit1：（设备工作模式）
1：北斗抗干扰模式，
0：不抗干扰模式
1	1	定位状态字	uint8	1	—	bit0~3（定位状态）：
0x00：定位无效
0x01：还没有卫星时间
0x02：有故障星
0x03：PDOP值太大（＞50）
0x08：时间有效，没有可用卫星
0x09：只有1颗可用卫星9
0x0A：只有2颗可用卫星
0x0B：只有3颗可用卫星
0x0C：正常定位
0x0D： 高度超差(＞3000km或＜-1km）
0x0E：速度≥500m/s
bit4~5（定位方式）：
0x00：定位无效
0x01：单点
0x02：固定坐标
0x03：RTK
bit6~7（定位模式）：
0x00：定位无效
0x01：B3定位
0x02：B1定位
0x03：B1/B3组合定位
2	4	UTC天秒	uint32	1	ms	
6	1	UTC日/军民码状态	uint8	1	—	bit0～4（UTC日）：
范围1～31
bit5（军民码状态）：
1=军码，0=民码
7	1	UTC月/时间标志	uint8	1	—	bit0~3（UTC月）：
范围1~12
bit4（UTC时间有效标志）：
1=有效，0=无效
8	1	UTC年	uint8	year+2020	—	
9	1	定位星数	uint8	1	个	使用卫星数
10	1	导航精度因子PDOP	uint8	0.1	—	
11	4	经度	int32	10-7	°	东经为正
15	4	纬度	int32	10-7	°	北纬为正
19	4	高度	int32	0.01	m	海拔高度
23	2	高程异常	int16	0.01	m	=椭球高-海拔高
25	2	地速方向	uint16	0.01	°	0º～360º（北偏东为正）
27	2	地速	uint16	0.1	km/h	
29	2	天速	int16	0.1	m/s	向上为正
31	1	载噪比大于45卫星数	uint8	1	个	高四位B1、低四位B3
32	1	载噪比大于40卫星数	uint8	1	个	高四位B1、低四位B3
33	1	载噪比大于38卫星数	uint8	1	个	高四位B1、低四位B3
数据长度	34					

3.1.16MSG#0x60	 动力系统
MSG_ID	DATA_ENGINE（0x60）
字节偏移量	字节数	名称	类型	分辨率	单位	备注
0	2	发动机转速	uint16	1	r/min	
2	2	缸头1温度	int16	0.1	℃	
4	2	缸头2温度	int16	0.1	℃	
6	2	缸头3温度	int16	0.1	℃	
8	2	缸头4温度	int16	0.1	℃	
10	2	ECU燃油压力	int16	0.1	Kpa	
12	2	进气温度	int16	0.1	℃	
14	2	大气压力	int16	0.1	Kpa	
16	2	ECU油门反馈	int16	0.1	%	
18	1	发电机告警字	uint8	Bit0：预警
Bit1：告警	—	Bit0：0-预警，1-正常
Bit1：0-告警，1-正常
19	1	燃油泵占空比	uint8	1	%	0~100
20	1	燃油液位	uint8	1	%	0~100
21	2	剩余油量	uint16	0.1	L	
23	2	瞬时油耗	uint16	0.1	L/h	
25	1	起动机启动信号	uint8	1	—	1：启动，0：断开
26	1	故障字0	uint8	Bit0~1：点火装置1
Bit2~3：点火装置2
Bit4~5：点火装置3
Bit6~7：点火装置4	—	00：正常，11：故障，
01，告警
27	1	故障字1	uint8	Bit0~1：注油装置1
Bit2~3：注油装置2
Bit4~7：备用	—	同上
28	1	故障字2	uint8	Bit0~1：转速传感器故障
Bit2~3：TPS故障
Bit4：节气门机构故障
Bit5：燃油泵故障
Bit6~7：备用		Bit0~1：
0：正常，1：转速传感器1故障，2：转速传感器2故障
Bit2~3：
0：正常，1：TPS1故障
2：TPS2故障，3：TPS1和TPS2都故障
Bit4，Bit5：
0：正常，1：故障
数据长度	29					


3.2CLASS_ID#12 日志记录格式帧定义
3.2.1飞行遥测数据格式帧定义：
MSG_ID	0x01
字节偏移量	字节数	名称	类型	分辨率	单位	备注
0	1	对应CLASS_ID	uint8	1		
1	1	对应MSG_ID	uint8	1		
2	1	组号	uint8	1		每一帧遥测数据格式需分多次传输，一次最多9个数据格式
3	1	数据1序号	uint8	1		对应帧中的数据序号
4	16	数据1名称	char	1		数据名称字符串
20	1	数据1类型	uint8	1		Uint8：1
Int8:2
Int32:3
Uint32:4
Float:5
Double:6
21	4	数据1分辨率	float	1		
25	4	数据1偏移量	float	1		
	…	…				
211	1	数据9序号	uint8	1		
212	16	数据9名称	char	1		
228	1	数据9类型	uint8	1		
229	4	数据9分辨率	float	1		
233	4	数据9偏移量	float	1		
数据长度	236					

3.3CLASS_ID#13	航线下行数据

3.3.1MSG#0x01	装订航线信息指令反馈_航点请求
MSG_ID	ACK（0x02）
字节偏移量	字节数	名称	类型	分辨率	单位	备注
1	Uint8	航线号				
1	Uint8	航点号				
数据长度	2					

3.3.2MSG#0x02 	请求所有航线信息数据帧反馈
MSG_ID	ACK（0x01）
字节偏移量	字节数	名称	类型	分辨率	单位	备注
0	1	Airline[0]
航线编号	uint8		—	
1	1	Airline[0]
保存航线	uint8			IDLE = 0
UPLOAD = 1
STORED = 2
2	1	Airline[0]
使用航线	uint8				
3	2	Airline[0]
航点个数	uint16			
5	2	Airline[0]
航线类型	uint16			
7-62		……				
63	1	Airline[9]
航线编号	uint8			
64	1	Airline[9]
保存航线	uint8			
65	1	Airline[9]
使用航线	uint8			
66	2	Airline[9]
航点个数	uint16			
68	2	Airline[9]
航线类型	uint16			
数据长度	69					

3.3.3MSG#0x02 	mission_ack消息帧
MSG_ID	ACK（0x01）
字节偏移量	字节数	名称	类型	分辨率	单位	备注
0	1	结果	uint8			
数据长度	1					

结果内容
0	MAV_MISSION_ACCEPTED
1	MAV_MISSION_ERROR
2	MAV_MISSION_UNSUPPORTED_FRAME
3	MAV_MISSION_UNSUPPORTED
4	MAV_MISSION_NO_SPACE
5	MAV_MISSION_INVALID
20+n	MAV_AIRLINE_ACTIVE_OK+index(航线序号)
30+n	MAV_AIRLINE_ACTIVE_FAILED+index
40+n	MAV_AIRLINE_UPLOAD_OK+_transfer_airline_index
50+n	MAV_AIRLINE_UPLOAD_FAILED+_transfer_airline_index
60+n	MAV_AIRLINE_DELETE_OK+ airline_index
61+n	MAV_AIRLINE_DELETE_FAILED+ airline_index
70+n	MAV_AIRLINE_ACTIVE_CLEAR_OK+ airline_index
71+n	MAV_AIRLINE_ACTIVE_CLEAR_FAILED+ airline_index


3.3.4MSG#0x03	请求单条航线航路点信息数据帧反馈
MSG_ID	ACK（0x01）
字节偏移量	字节数	名称	类型	分辨率	单位	备注
0	1	航点类型	Uint8	1	—	
1	1	航点号	Uint8	1		
2	1	高度类型	Uint8			0：海拔高度
3：相对高度	
3	1	是否继续下一航点	Uint8			0：否
1：是
4	4	纬度	Float			
8	4	经度	Float			
12	4	高度	Float			
16	4	参数1	Float			
20	4	参数2	Float			
24	4	参数3	Float			
28	4	参数4	Float			
数据长度	3					

3.3.5MSG#0x04	标记航点信息帧
MSG_ID	MSG（0x0）
字节偏移量	字节数	名称	类型	分辨率	单位	备注
1	4	Home点经度	Float			
1	4	Home点纬度	Float			
	4	Home点高度	Float			
	4	降落点经度	Float			
	4	降落点纬度	Float			
	4	降落点纬度	Float			
	16	标记点1名称	Char			
	4	标记点1经度	Float			
	4	标记点1纬度	Float			
	4	标记点1高度	Float			
	16	标记点2名称	char			
	4	标记点2经度	Float			
	4	标记点2纬度	Float			
数据长度	4	标记点2高度	Float			
	16	标记点3名称	char			
	4	标记点3经度	Float			
	4	标记点3纬度	Float			
	4	标记点3高度	Float			
	16	标记点2名称	char			
	4	标记点2经度	Float			
	4	标记点2纬度	Float			
	4	标记点2高度	Float			
	16	标记点3名称	char			
	4	标记点3经度	Float			
	4	标记点3纬度	Float			
	4	标记点3高度	Float			
	16	标记点2名称	chai			
	4	标记点2经度	Float			
	4	标记点2纬度	Float			
	4	标记点2高度	Float			
数据长度	134					
3.4CLASS_ID#14	参数下行帧
3.4.1   CMD#0X01		参数内容下行帧  
MSG_ID	（0xXX）
字节偏移量	字节数	名称	类型	分辨率	单位	备注
0	16	参数名称	Float			
16	2	参数序号	Uint16			
18	2	参数计数	Uint16			
20	1	参数类型	Uint8			
21	4	参数值	Float			
数据长度	25					

4消息交互机制
4.1遥控心跳帧（CLASS_ID#01）交互机制
	地面向空中进行周期发送，发送频率为1Hz。
4.2日志记录内容格式帧交互机制
开始日志记录时飞控自动向地面站发送需进行日志记录的数据帧格式，帧内容不足9个数据时一帧发完，超过9个进行多帧发送后地面站进行组包，组包顺序按照组序号进行排列，每一格式帧发送后地面站回复后再进行下一帧数据发送，否则继续周期发送该格式帧，直至接受到地面站对该帧回复，
需要记录日志的遥测帧发送该格式帧，无需记录日志的遥测帧则无需发送该帧格式。
4.3标记航点帧交互机制
飞控在与地面站交互全过程都可以进行该帧的更新发送，每次更新发送原则上只发送一遍，地面站进行应答并显示与地面站，若无应答则该帧以1hz的频率连发10次，若仍无应答则停止发送。针对地面站中途重启工况，地面站应有标记航点查询机制，发送标记航点查询帧后，飞控需对目前已有所有标记点进行1HZ频率发送，直至收到地面站应答或发送次数超过10次，则停止发送。
4.4航线装订交互机制
地面站点击装订航线指令，地面站向飞控发送装订航线信息数据帧
飞控收到航线信息后向地面站发送航点请求，地面站自动向飞控发送该点的数据，收飞控收到第一个航点信息后发送下一航点请求，如此往复，直至接收完所有航点信息后，失败则向地面站发送mission_ack消息帧（type== MAV_MISSION_ERROR）,所有航点装订完成则向地面站发送mission_ack消息帧（type==MAV_AIRLINE_UPLOAD_OK+_transfer_airline_index）
4.4.1一般指令消息包交互机制
地面站发送指令时，指令码和附加信息一起发送。在每次发送指令时，指令码和附加信息应连续发送三拍，周期100ms。
发送完指令后，地面站进行计时，1秒内收到对应的飞控回报(在飞行遥测帧MSG0x02中)，则输出对应的指令响应/拒绝信息，超过1秒，输出指令超时信息。
注意：1. 指令响应用绿色字体，拒绝用红色字体，超时用黄色字体。







